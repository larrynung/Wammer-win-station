(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["underscore","backbone","collections/events","collections/attachments","views/events","views/photos","views/calendar","views/collections","localstorage"],function(e,n,r,i,s,o,u,a,f){var l,c;return c=this,l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.routes={"":"actionEvents","/":"actionEvents",events:"actionEvents","events/":"actionEvents","events/:date":"actionEvents","events/:date/":"actionEvents","events/:date/:id":"actionEvents",photos:"actionPhotos","photos/":"actionPhotos","photos/:date":"actionPhotos",calendar:"actionCalendar",collection:"actionCollection"},n.prototype.initialize=function(){return f.reset(["nc_events_view_data","nc_photos_view_data","nc_view_state:events","nc_view_state:photos"]),dispatch.on("all",function(e){return Logger.log("Event trigger : "+e)}),this.on("all",function(e){return Logger.log("Router Event trigger : "+e)}),this.main=$("#main")},n.prototype.actionEvents=function(e,t){var n,i;i=new f("nc_view_state:events"),r.length===0&&r.callPosts();if(!e&&!t)if(i.data.id!=null)t=i.data.id;else if(n=r.first())e=n.get("dateUri");this.main.empty().append(s.render(e,t).el);if(t!=null)return i.data={id:t},i.save()},n.prototype.actionPhotos=function(e){var t,n;n=new f("nc_view_state:photos"),i.length===0&&i.callAttachments();if(!e)if(n.data.date!=null)e=n.data.date;else if(t=i.first())e=t.get("dateUri");return this.main.empty().append(o.render(e).el),n.data={date:e},n.save()},n.prototype.actionCalendar=function(){return this.main.empty().append(u.render().el),u.renderCalendar()},n.prototype.actionCollection=function(){return this.main.empty().append(a.render().el)},n}(n.Router)})}).call(this);