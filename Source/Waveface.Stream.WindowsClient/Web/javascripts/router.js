(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["underscore","backbone","collections/events","collections/attachments","collections/documents","collections/calendar","views/events","views/photos","views/documents","views/calendar","views/collections","localstorage","com/subscriber"],function(e,n,r,i,s,o,u,a,f,l,c,h,p){var d,v;return v=this,d=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.routes={"":"actionEvents","/":"actionEvents",events:"actionEvents","events/":"actionEvents","events/:date":"actionEvents","events/:date/":"actionEvents","events/:date/:id":"actionEvents",photos:"actionPhotos","photos/":"actionPhotos","photos/:date":"actionPhotos",documents:"actionDocs","documents/":"actionDocs","documents/:date":"actionDocs",calendar:"actionCalendar",collection:"actionCollection"},n.prototype.initialize=function(){return h.reset(["nc_events_view_data","nc_photos_view_data","nc_view_state:events","nc_view_state:photos"]),dispatch.on("all",function(e){return Logger.log("Event trigger : "+e)}),this.on("all",function(e){return Logger.log("Router Event trigger : "+e)}),this.main=$("#main")},n.prototype.actionEvents=function(e,t){var n,i;i=new h("nc_view_state:events"),r.length===0&&r.callPosts();if(!e&&!t)if(i.data.id!=null)t=i.data.id;else if(n=r.first())e=n.get("dateUri");this.main.empty().append(u.render(e,t).el),t!=null&&(i.data={id:t},i.save()),r.subscribe(),r.subscribe("update:event",!1,!1,p.E_POS_UPD)},n.prototype.actionPhotos=function(e){var t,n;n=new h("nc_view_state:photos"),i.length===0&&i.callAttachments();if(!e)if(n.data.date!=null)e=n.data.date;else if(t=i.first())e=t.get("dateUri");return this.main.empty().append(a.render(e).el),n.data={date:e},n.save()},n.prototype.actionDocs=function(e){var t,n;n=new h("nc_view_state:docs"),s.length===0&&s.callAttachments();if(!e)if(n.data.date!=null)e=n.data.date;else if(t=s.first())e=t.get("dateUri");return this.main.empty().append(f.render(e).el),n.data={date:e},n.save()},n.prototype.actionCalendar=function(){return this.main.empty().append(l.render().el),l.renderCalendar()},n.prototype.actionCollection=function(){return this.main.empty().append(c.render().el)},n}(n.Router)})}).call(this);