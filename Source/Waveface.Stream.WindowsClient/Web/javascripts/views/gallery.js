(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["backbone","mustache","mousetrap"],function(e,n,r){var i;return i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.initialize=function(){},i.prototype.render=function(t,n,i){var s,o=this;return i==null&&(i=$(n.currentTarget).index()),this.history=e.history.fragment,s={dataSource:t,debug:!1,height:$("#main").height(),show:i,extend:function(e){return this.addElement("close"),this.appendChild("container","close"),this.$("close").html("&times")}},$("body").append('<div id="gallery"></div>'),$("#gallery").galleria(s).on("click",".galleria-close",function(){return o.close.call(o)}),r.bind("esc",function(){return o.close.call(o),!1}),Router.navigate(e.history.fragment+"/gallery")},i.prototype.close=function(){return $("#gallery").remove(),Router.navigate(this.history)},i}(e.View),new i})}).call(this);