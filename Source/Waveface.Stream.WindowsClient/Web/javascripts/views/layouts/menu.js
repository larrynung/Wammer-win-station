(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["underscore","backbone","mustache","text!templates/layouts/menu.html","collections/events","com/user","lib/lodash/underscore.string"],function(e,n,r,i,s,o){var u;return u=function(n){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,n),s.prototype.initialize=function(){return dispatch.on("user:info:save",this.renderUserInfo,this)},s.prototype.render=function(){return Router.on("route:actionEvents",this.menuEvents,this),Router.on("route:actionPhotos",this.menuPhotos,this),Router.on("route:actionDocs",this.menuDocs,this),Router.on("route:actionCalendar",this.menuCalendar,this),Router.on("route:actionCollection",this.menuCollection,this),this.renderUserInfo(),this},s.prototype.menuEvents=function(e){return this.highlight(".nav-to-events")},s.prototype.menuPhotos=function(e){return this.highlight(".nav-to-photos")},s.prototype.menuDocs=function(e){return this.highlight(".nav-to-docs")},s.prototype.menuCalendar=function(e){return this.highlight(".nav-to-calendar")},s.prototype.menuCollection=function(e){return this.highlight(".nav-to-collection")},s.prototype.highlight=function(e){return this.$("li").removeClass("active"),this.$(e).addClass("active")},s.prototype.renderUserInfo=function(){var t;return t={username:e.str.truncate(o.get("nickname"),12)},this.$el.html(r.render(i,t))},s}(n.View),new u})}).call(this);