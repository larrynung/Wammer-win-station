(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["backbone","mustache","views/partials/attachment","views/gallery","collections/attachments","text!templates/layouts/day_view_calendar.html"],function(e,n,r,i,s,o){var u;return u=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.tagName="section",r.prototype.events={"click #nextDateBtn":"nextPage","click .nextDate":"nextPage","click #previousDateBtn":"previousPage","click .previousDate":"previousPage","click .header-date":"calendarSwitch","click #nextMonthBtn":"nextMonth","click #previousMonthBtn":"previousMonth"},r.prototype.initialize=function(){},r.prototype.nextPage=function(){if(this.nextDateUri)return Router.navigate(""+this.id+"/"+this.nextDateUri,{trigger:!0})},r.prototype.previousPage=function(){if(this.previousDateUri=this.collection.previousDate(this.date))return Router.navigate(""+this.id+"/"+this.previousDateUri,{trigger:!0})},r.prototype.setDates=function(){var e,t;return this.currentDate=moment(this.date).format("MMMM DD, YYYY"),this.currentYear=moment(this.date).format("YYYY"),this.currentMonth=moment(this.date).format("M")-1,this.currentYearMonth=moment(this.date).format("MMMM YYYY"),t=this.collection.previousDate(this.date,!1),this.previousDateUri=t?t:null,this.previousDate=t?moment(t).format("MMMM DD"):null,e=this.collection.nextDate(this.date),this.nextDateUri=e?e:null,this.nextDate=e?moment(e).format("MMMM DD"):null},r.prototype.setHeaderStyle=function(){return this.nextDateUri?this.$("#nextDateBtn").removeClass("disabled"):this.$("#nextDateBtn").addClass("disabled"),this.previousDateUri?this.$("#previousDateBtn").removeClass("disabled"):this.$("#previousDateBtn").addClass("disabled")},r.prototype.renderCalendar=function(e){var t,r=this;return this.mode="calendar",t={currentDate:this.currentYearMonth},this.$el.html(n.render(o,t)),this.$calendar=this.$("#calendar").fullCalendar(e),Mousetrap.reset(),Mousetrap.bind("right",function(){return r.nextMonth(),!1}),Mousetrap.bind("left",function(){return r.previousMonth(),!1}),Mousetrap.bind("c",function(){return r.calendarSwitch(),!1})},r.prototype.updateHeaderDate=function(e){if(e!=null)return this.$(".header-date").text(e)},r.prototype.nextMonth=function(){return this.$calendar.fullCalendar("next")},r.prototype.previousMonth=function(){return this.$calendar.fullCalendar("prev")},r}(e.View)})}).call(this);