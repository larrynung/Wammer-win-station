(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["underscore","backbone","moment"],function(e,n,r){var i;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.setOrientation(),this.setDate()},n.prototype.setOrientation=function(){var e,t,n,r;return t=this.get("image_meta"),t?(r=this.getImageSize(t),e=r[0],n=r[1],e>n?this.set("orientation","potrait"):this.set("orientation","landscape")):!1},n.prototype.setDate=function(){var e;return e=this.get("timestamp"),e?this.set("dateUri",r(e).format("YYYY-MM-DD")):!1},n.prototype.getImageSize=function(e){return e.small!=null&&e.small.height!=null&&e.small.width!=null?[e.small.height,e.small.width]:e.middle!=null&&e.middle.height!=null&&e.middle.width!=null?[e.middle.height,e.middle.width]:e.large!=null&&e.large.height!=null&&e.large.width!=null?[e.large.height,e.large.width]:[0,0]},n}(n.Model)})}).call(this);